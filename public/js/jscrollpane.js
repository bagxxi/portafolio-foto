/*!
 * jScrollPane - v2.0.14 - 2013-05-01
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */
!function(Bt,Dt,St){Bt.fn.jScrollPane=function(n){function o(l,t){function p(t){var e,n,o,i,s,r,a=!1,c=!1;if(I=t,L===St)s=l.scrollTop(),r=l.scrollLeft(),l.css({overflow:"hidden",padding:0}),F=l.innerWidth()+gt,O=l.innerHeight(),l.width(F),L=Bt('<div class="jspPane" />').css("padding",jt).append(l.children()),V=Bt('<div class="jspContainer" />').css({width:F+"px",height:O+"px"}).append(L).appendTo(l);else{if(l.css("width",""),a=I.stickToBottom&&B(),c=I.stickToRight&&D(),(i=l.innerWidth()+gt!=F||l.outerHeight()!=O)&&(F=l.innerWidth()+gt,O=l.innerHeight(),V.css({width:F+"px",height:O+"px"})),!i&&vt==G&&L.outerHeight()==q)return void l.width(F);vt=G,L.css("width",""),l.width(F),V.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}L.css("overflow","auto"),G=t.contentWidth?t.contentWidth:L[0].scrollWidth,q=L[0].scrollHeight,L.css("overflow",""),K=1<(N=q/O),(Q=1<(E=G/F))||K?(l.addClass("jspScrollable"),(e=I.maintainPosition&&(J||tt))&&(n=C(),o=T()),u(),d(),f(),e&&(k(c?G-F:n,!1),w(a?q-O:o,!1)),P(),S(),R(),I.enableKeyboardNavigation&&W(),I.clickOnTrack&&h(),M(),I.hijackInternalLinks&&X()):(l.removeClass("jspScrollable"),L.css({top:0,width:V.width()-gt}),H(),A(),Y(),j()),I.autoReinitialise&&!ht?ht=setInterval(function(){p(I)},I.autoReinitialiseDelay):!I.autoReinitialise&&ht&&clearInterval(ht),s&&l.scrollTop(0)&&w(s,!1),r&&l.scrollLeft(0)&&k(r,!1),l.trigger("jsp-initialised",[Q||K])}function u(){K&&(V.append(Bt('<div class="jspVerticalBar" />').append(Bt('<div class="jspCap jspCapTop" />'),Bt('<div class="jspTrack" />').append(Bt('<div class="jspDrag" />').append(Bt('<div class="jspDragTop" />'),Bt('<div class="jspDragBottom" />'))),Bt('<div class="jspCap jspCapBottom" />'))),et=V.find(">.jspVerticalBar"),nt=et.find(">.jspTrack"),U=nt.find(">.jspDrag"),I.showArrows&&(rt=Bt('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",i(0,-1)).bind("click.jsp",x),at=Bt('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",i(0,1)).bind("click.jsp",x),I.arrowScrollOnHover&&(rt.bind("mouseover.jsp",i(0,-1,rt)),at.bind("mouseover.jsp",i(0,1,at))),e(nt,I.verticalArrowPositions,rt,at)),it=O,V.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){it-=Bt(this).outerHeight()}),U.hover(function(){U.addClass("jspHover")},function(){U.removeClass("jspHover")}).bind("mousedown.jsp",function(t){Bt("html").bind("dragstart.jsp selectstart.jsp",x),U.addClass("jspActive");var e=t.pageY-U.position().top;return Bt("html").bind("mousemove.jsp",function(t){g(t.pageY-e,!1)}).bind("mouseup.jsp mouseleave.jsp",r),!1}),n())}function n(){nt.height(it+"px"),J=0,ot=I.verticalGutter+nt.outerWidth(),L.width(F-ot-gt);try{0===et.position().left&&L.css("margin-left",ot+"px")}catch(t){}}function d(){Q&&(V.append(Bt('<div class="jspHorizontalBar" />').append(Bt('<div class="jspCap jspCapLeft" />'),Bt('<div class="jspTrack" />').append(Bt('<div class="jspDrag" />').append(Bt('<div class="jspDragLeft" />'),Bt('<div class="jspDragRight" />'))),Bt('<div class="jspCap jspCapRight" />'))),ct=V.find(">.jspHorizontalBar"),lt=ct.find(">.jspTrack"),Z=lt.find(">.jspDrag"),I.showArrows&&(dt=Bt('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",i(-1,0)).bind("click.jsp",x),ft=Bt('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",i(1,0)).bind("click.jsp",x),I.arrowScrollOnHover&&(dt.bind("mouseover.jsp",i(-1,0,dt)),ft.bind("mouseover.jsp",i(1,0,ft))),e(lt,I.horizontalArrowPositions,dt,ft)),Z.hover(function(){Z.addClass("jspHover")},function(){Z.removeClass("jspHover")}).bind("mousedown.jsp",function(t){Bt("html").bind("dragstart.jsp selectstart.jsp",x),Z.addClass("jspActive");var e=t.pageX-Z.position().left;return Bt("html").bind("mousemove.jsp",function(t){v(t.pageX-e,!1)}).bind("mouseup.jsp mouseleave.jsp",r),!1}),pt=V.innerWidth(),o())}function o(){V.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){pt-=Bt(this).outerWidth()}),lt.width(pt+"px"),tt=0}function f(){if(Q&&K){var t=lt.outerHeight(),e=nt.outerWidth();it-=t,Bt(ct).find(">.jspCap:visible,>.jspArrow").each(function(){pt+=Bt(this).outerWidth()}),pt-=e,O-=e,F-=t,lt.parent().append(Bt('<div class="jspCorner" />').css("width",t+"px")),n(),o()}Q&&L.width(V.outerWidth()-gt+"px"),q=L.outerHeight(),N=q/O,Q&&((ut=Math.ceil(1/E*pt))>I.horizontalDragMaxWidth?ut=I.horizontalDragMaxWidth:ut<I.horizontalDragMinWidth&&(ut=I.horizontalDragMinWidth),Z.width(ut+"px"),_=pt-ut,c(tt)),K&&((st=Math.ceil(1/N*it))>I.verticalDragMaxHeight?st=I.verticalDragMaxHeight:st<I.verticalDragMinHeight&&(st=I.verticalDragMinHeight),U.height(st+"px"),$=it-st,a(J))}function e(t,e,n,o){var i,s="before",r="after";"os"==e&&(e=/Mac/.test(navigator.platform)?"after":"split"),e==s?r=e:e==r&&(s=e,i=n,n=o,o=i),t[s](n)[r](o)}function i(t,e,n){return function(){return s(t,e,this,n),this.blur(),!1}}function s(t,e,n,o){n=Bt(n).addClass("jspActive");var i,s,r=!0,a=function(){0!==t&&mt.scrollByX(t*I.arrowButtonSpeed),0!==e&&mt.scrollByY(e*I.arrowButtonSpeed),s=setTimeout(a,r?I.initialDelay:I.arrowRepeatFreq),r=!1};a(),i=o?"mouseout.jsp":"mouseup.jsp",(o=o||Bt("html")).bind(i,function(){n.removeClass("jspActive"),s&&clearTimeout(s),s=null,o.unbind(i)})}function h(){j(),K&&nt.bind("mousedown.jsp",function(i){if(i.originalTarget===St||i.originalTarget==i.currentTarget){var s,r=Bt(this),t=r.offset(),a=i.pageY-t.top-J,c=!0,l=function(){var t=r.offset(),e=i.pageY-t.top-st/2,n=O*I.scrollPagePercent,o=$*n/(q-O);if(a<0)e<J-o?mt.scrollByY(-n):g(e);else{if(!(0<a))return void p();J+o<e?mt.scrollByY(n):g(e)}s=setTimeout(l,c?I.initialDelay:I.trackClickRepeatFreq),c=!1},p=function(){s&&clearTimeout(s),s=null,Bt(document).unbind("mouseup.jsp",p)};return l(),Bt(document).bind("mouseup.jsp",p),!1}}),Q&&lt.bind("mousedown.jsp",function(i){if(i.originalTarget===St||i.originalTarget==i.currentTarget){var s,r=Bt(this),t=r.offset(),a=i.pageX-t.left-tt,c=!0,l=function(){var t=r.offset(),e=i.pageX-t.left-ut/2,n=F*I.scrollPagePercent,o=_*n/(G-F);if(a<0)e<tt-o?mt.scrollByX(-n):v(e);else{if(!(0<a))return void p();tt+o<e?mt.scrollByX(n):v(e)}s=setTimeout(l,c?I.initialDelay:I.trackClickRepeatFreq),c=!1},p=function(){s&&clearTimeout(s),s=null,Bt(document).unbind("mouseup.jsp",p)};return l(),Bt(document).bind("mouseup.jsp",p),!1}})}function j(){lt&&lt.unbind("mousedown.jsp"),nt&&nt.unbind("mousedown.jsp")}function r(){Bt("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),U&&U.removeClass("jspActive"),Z&&Z.removeClass("jspActive")}function g(t,e){K&&(t<0?t=0:$<t&&(t=$),e===St&&(e=I.animateScroll),e?mt.animate(U,"top",t,a):(U.css("top",t),a(t)))}function a(t){t===St&&(t=U.position().top),V.scrollTop(0);var e=0===(J=t),n=J==$,o=-(t/$)*(q-O);bt==e&&kt==n||(bt=e,kt=n,l.trigger("jsp-arrow-change",[bt,kt,wt,yt])),m(e,n),L.css("top",o),l.trigger("jsp-scroll-y",[-o,e,n]).trigger("scroll")}function v(t,e){Q&&(t<0?t=0:_<t&&(t=_),e===St&&(e=I.animateScroll),e?mt.animate(Z,"left",t,c):(Z.css("left",t),c(t)))}function c(t){t===St&&(t=Z.position().left),V.scrollTop(0);var e=0===(tt=t),n=tt==_,o=-(t/_)*(G-F);wt==e&&yt==n||(wt=e,yt=n,l.trigger("jsp-arrow-change",[bt,kt,wt,yt])),b(e,n),L.css("left",o),l.trigger("jsp-scroll-x",[-o,e,n]).trigger("scroll")}function m(t,e){I.showArrows&&(rt[t?"addClass":"removeClass"]("jspDisabled"),at[e?"addClass":"removeClass"]("jspDisabled"))}function b(t,e){I.showArrows&&(dt[t?"addClass":"removeClass"]("jspDisabled"),ft[e?"addClass":"removeClass"]("jspDisabled"))}function w(t,e){g(t/(q-O)*$,e)}function k(t,e){v(t/(G-F)*_,e)}function y(t,e,n){var o,i,s,r,a,c,l,p,u,d=0,f=0;try{o=Bt(t)}catch(h){return}for(i=o.outerHeight(),s=o.outerWidth(),V.scrollTop(0),V.scrollLeft(0);!o.is(".jspPane");)if(d+=o.position().top,f+=o.position().left,o=o.offsetParent(),/^body|html$/i.test(o[0].nodeName))return;c=(r=T())+O,d<r||e?p=d-I.verticalGutter:c<d+i&&(p=d-O+i+I.verticalGutter),p&&w(p,n),l=(a=C())+F,f<a||e?u=f-I.horizontalGutter:l<f+s&&(u=f-F+s+I.horizontalGutter),u&&k(u,n)}function C(){return-L.position().left}function T(){return-L.position().top}function B(){var t=q-O;return 20<t&&t-T()<10}function D(){var t=G-F;return 20<t&&t-C()<10}function S(){V.unbind(Tt).bind(Tt,function(t,e,n,o){var i=tt,s=J;return mt.scrollBy(n*I.mouseWheelSpeed,-o*I.mouseWheelSpeed,!1),i==tt&&s==J})}function H(){V.unbind(Tt)}function x(){return!1}function P(){L.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(t){y(t.target,!1)})}function A(){L.find(":input,a").unbind("focus.jsp")}function W(){function o(){var t=tt,e=J;switch(i){case 40:mt.scrollByY(I.keyboardSpeed,!1);break;case 38:mt.scrollByY(-I.keyboardSpeed,!1);break;case 34:case 32:mt.scrollByY(O*I.scrollPagePercent,!1);break;case 33:mt.scrollByY(-O*I.scrollPagePercent,!1);break;case 39:mt.scrollByX(I.keyboardSpeed,!1);break;case 37:mt.scrollByX(-I.keyboardSpeed,!1)}return s=t!=tt||e!=J}var i,s,r=[];Q&&r.push(ct[0]),K&&r.push(et[0]),L.focus(function(){l.focus()}),l.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target===this||r.length&&Bt(t.target).closest(r).length){var e=tt,n=J;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:i=t.keyCode,o();break;case 35:w(q-O),i=null;break;case 36:w(0),i=null}return!(s=t.keyCode==i&&e!=tt||n!=J)}}).bind("keypress.jsp",function(t){return t.keyCode==i&&o(),!s}),I.hideFocus?(l.css("outline","none"),"hideFocus"in V[0]&&l.attr("hideFocus",!0)):(l.css("outline",""),"hideFocus"in V[0]&&l.attr("hideFocus",!1))}function Y(){l.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function M(){if(location.hash&&1<location.hash.length){var t,e,n=escape(location.hash.substr(1));try{t=Bt("#"+n+', a[name="'+n+'"]')}catch(o){return}t.length&&L.find(n)&&(0===V.scrollTop()?e=setInterval(function(){0<V.scrollTop()&&(y(t,!0),Bt(document).scrollTop(V.position().top),clearInterval(e))},50):(y(t,!0),Bt(document).scrollTop(V.position().top)))}}function X(){Bt(document.body).data("jspHijack")||(Bt(document.body).data("jspHijack",!0),Bt(document.body).delegate("a[href*=#]","click",function(t){var e,n,o,i,s,r=this.href.substr(0,this.href.indexOf("#")),a=location.href;if(-1!==location.href.indexOf("#")&&(a=location.href.substr(0,location.href.indexOf("#"))),r===a){e=escape(this.href.substr(this.href.indexOf("#")+1));try{n=Bt("#"+e+', a[name="'+e+'"]')}catch(c){return}n.length&&((o=n.closest(".jspScrollable")).data("jsp").scrollToElement(n,!0),o[0].scrollIntoView&&(i=Bt(Dt).scrollTop(),((s=n.offset().top)<i||s>i+Bt(Dt).height())&&o[0].scrollIntoView()),t.preventDefault())}}))}function R(){var i,s,r,a,c,l=!1;V.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(t){var e=t.originalEvent.touches[0];i=C(),s=T(),r=e.pageX,a=e.pageY,l=!(c=!1)}).bind("touchmove.jsp",function(t){if(l){var e=t.originalEvent.touches[0],n=tt,o=J;return mt.scrollTo(i+r-e.pageX,s+a-e.pageY),c=c||5<Math.abs(r-e.pageX)||5<Math.abs(a-e.pageY),n==tt&&o==J}}).bind("touchend.jsp",function(){l=!1}).bind("click.jsp-touchclick",function(){if(c)return c=!1})}function z(){var t=T(),e=C();l.removeClass("jspScrollable").unbind(".jsp"),l.replaceWith(Ct.append(L.children())),Ct.scrollTop(t),Ct.scrollLeft(e),ht&&clearInterval(ht)}var I,L,F,O,V,G,q,E,N,K,Q,U,$,J,Z,_,tt,et,nt,ot,it,st,rt,at,ct,lt,pt,ut,dt,ft,ht,jt,gt,vt,mt=this,bt=!0,wt=!0,kt=!1,yt=!1,Ct=l.clone(!1,!1).empty(),Tt=Bt.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";jt=l.css("paddingTop")+" "+l.css("paddingRight")+" "+l.css("paddingBottom")+" "+l.css("paddingLeft"),gt=(parseInt(l.css("paddingLeft"),10)||0)+(parseInt(l.css("paddingRight"),10)||0),Bt.extend(mt,{reinitialise:function(t){p(t=Bt.extend({},I,t))},scrollToElement:function(t,e,n){y(t,e,n)},scrollTo:function(t,e,n){k(t,n),w(e,n)},scrollToX:function(t,e){k(t,e)},scrollToY:function(t,e){w(t,e)},scrollToPercentX:function(t,e){k(t*(G-F),e)},scrollToPercentY:function(t,e){w(t*(q-O),e)},scrollBy:function(t,e,n){mt.scrollByX(t,n),mt.scrollByY(e,n)},scrollByX:function(t,e){v((C()+Math[t<0?"floor":"ceil"](t))/(G-F)*_,e)},scrollByY:function(t,e){g((T()+Math[t<0?"floor":"ceil"](t))/(q-O)*$,e)},positionDragX:function(t,e){v(t,e)},positionDragY:function(t,e){g(t,e)},animate:function(t,e,n,o){var i={};i[e]=n,t.animate(i,{duration:I.animateDuration,easing:I.animateEase,queue:!1,step:o})},getContentPositionX:function(){return C()},getContentPositionY:function(){return T()},getContentWidth:function(){return G},getContentHeight:function(){return q},getPercentScrolledX:function(){return C()/(G-F)},getPercentScrolledY:function(){return T()/(q-O)},getIsScrollableH:function(){return Q},getIsScrollableV:function(){return K},getContentPane:function(){return L},scrollToBottom:function(t){g($,t)},hijackInternalLinks:Bt.noop,destroy:function(){z()}}),p(t)}return n=Bt.extend({},Bt.fn.jScrollPane.defaults,n),Bt.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){n[this]=n[this]||n.speed}),this.each(function(){var t=Bt(this),e=t.data("jsp");e?e.reinitialise(n):(Bt("script",t).filter('[type="text/javascript"],:not([type])').remove(),e=new o(t,n),t.data("jsp",e))})},Bt.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:St,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this);